{"version":3,"sources":["components/Hit/index.module.css","components/LocalSearch/filterHits.module.css","components/filePickerComponent.module.css","components/LocalSearch/context.js","components/LocalSearch/utils.js","components/LocalSearch/index.js","components/LocalSearch/connectHits.js","components/LocalSearch/filterHits.js","components/FilePickerComponent.js","components/FileContext.js","components/Hit/index.js","App.js","MyHits.js","index.js"],"names":["module","exports","hit","hitTitleLine","title","duration","link","highlight","filterName","container","LocalSearchContext","React","createContext","data","toggleFilter","filters","filterDataWithFilter","filter","item","Object","keys","every","attribute","LocalSearch","_ref","searchClient","props","objectWithoutProperties","_useState","useState","_useState2","slicedToArray","setFilters","useCallback","_ref2","group","name","value","currentFilters","nextFilters","objectSpread","defineProperty","length","filteredData","useMemo","react_default","a","createElement","context","Provider","assign","connectHits","Component","Consumer","hits","getGroupedAttributesByCount","filteredDataSet","Set","reduce","memo","forEach","total","facetCount","has","filterHits","getFilteredData","groupedAttributesByCount","nextFilteredData","groupedAttributesByCountWithoutAttribute","map","values","number","sort","b","getFilters","FilterHit","className","filterStyle","key","type","onChange","e","nativeEvent","target","checked","JSON","stringify","ConnectedFilterHits","_ref3","filterHits_FilterHit","prevent","stopPropagation","preventDefault","FilePickerComponent","onDrop","dataTransfer","files","styles","onDragEnter","onDragOver","JSONFileContext","setData","esm_extends","fileContent","FilePicker","useContext","reader","FileReader","file","window","history","pushState","concat","addEventListener","entries","parse","result","getSubData","Array","isArray","_Object$keys","_unused","alert","readAsText","useEffect","onpopstate","state","FilePickerComponent_FilePickerComponent","Highlight","style","Hit","_props$hit","attributes","Hit_Highlight","CustomHits","_ref$hits","id","components_Hit","App","FileContext_Provider","href","components_LocalSearch","indexName","FileContext_FilePicker","ReactDOM","render","src_App_0","document","getElementById"],"mappings":"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","file":"static/js/main.b03bfb09.chunk.js","sourcesContent":["// extracted by mini-css-extract-plugin\nmodule.exports = {\"hit\":\"Hit_hit__MXvA_\",\"hitTitleLine\":\"Hit_hitTitleLine__eSHMn\",\"title\":\"Hit_title__2ttS1\",\"duration\":\"Hit_duration__1RSeb\",\"link\":\"Hit_link__3Edkb\",\"highlight\":\"Hit_highlight__1-gx4\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"filterName\":\"filterHits_filterName__1qARp\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"container\":\"filePickerComponent_container__3AA_1\"};","import React from 'react';\n\nconst LocalSearchContext = React.createContext({\n  data: [],\n  toggleFilter: () => {},\n  filters: {},\n});\n\nexport default LocalSearchContext;\n","export const filterDataWithFilter = (data, filters) =>\n  data.filter(item =>\n    Object.keys(item).every(\n      attribute => !filters[attribute] || filters[attribute][item[attribute]]\n    )\n  );\n","import LocalSearchContext from './context';\nimport React, { useState, useCallback, useMemo } from 'react';\nimport { filterDataWithFilter } from './utils';\n\nconst LocalSearch = ({ searchClient: { data }, ...props }) => {\n  const [filters, setFilters] = useState({});\n\n  const toggleFilter = useCallback(({ group, name, value }) => {\n    setFilters(currentFilters => {\n      const nextFilters = {\n        ...currentFilters,\n        [group]: { ...currentFilters[group], [name]: value },\n      };\n\n      if (!value) {\n        delete nextFilters[group][name];\n      }\n\n      if (Object.keys(nextFilters[group]).length === 0) {\n        delete nextFilters[group];\n      }\n\n      return nextFilters;\n    });\n  });\n\n  const filteredData = useMemo(() => filterDataWithFilter(data, filters), [\n    filters,\n    data,\n  ]);\n\n  return (\n    <LocalSearchContext.Provider\n      value={{ data, filters, toggleFilter, filteredData }}\n      {...props}\n    ></LocalSearchContext.Provider>\n  );\n};\n\nexport default LocalSearch;\n","import React from 'react';\nimport LocalSearchContext from './context';\n\nconst connectHits = Component => () => (\n  <LocalSearchContext.Consumer>\n    {({ filteredData }) => <Component hits={filteredData} />}\n  </LocalSearchContext.Consumer>\n);\n\nexport default connectHits;\n","import React from 'react';\nimport LocalSearchContext from './context';\n\nimport filterStyle from './filterHits.module.css';\nimport { filterDataWithFilter } from './utils';\n\nconst getGroupedAttributesByCount = (data, filteredData, filters) => {\n  const filteredDataSet = new Set(filteredData);\n\n  const groupedAttributesByCount = data.reduce((memo, hit) => {\n    Object.keys(hit).forEach(attribute => {\n      memo[attribute] = memo[attribute] || {};\n      memo[attribute][hit[attribute]] = memo[attribute][hit[attribute]] || {\n        total: 0,\n        facetCount: 0,\n      };\n      memo[attribute][hit[attribute]].total += 1;\n      memo[attribute][hit[attribute]].facetCount +=\n        filteredDataSet.has(hit) || filters[attribute] ? 1 : 0;\n    });\n\n    return memo;\n  }, {});\n\n  return groupedAttributesByCount;\n};\n\nconst getFilters = (data, filteredData, filters) => {\n  const groupedAttributesByCount = getGroupedAttributesByCount(\n    data,\n    filteredData,\n    filters\n  );\n\n  Object.keys(filters).forEach(attribute => {\n    const nextFilters = { ...filters };\n    delete nextFilters[attribute];\n\n    const nextFilteredData = filterDataWithFilter(data, nextFilters);\n\n    const groupedAttributesByCountWithoutAttribute = getGroupedAttributesByCount(\n      data,\n      nextFilteredData,\n      nextFilters\n    );\n\n    groupedAttributesByCount[attribute] =\n      groupedAttributesByCountWithoutAttribute[attribute];\n  });\n\n  const flatten = Object.keys(groupedAttributesByCount).map(attribute => ({\n    name: attribute,\n    values: groupedAttributesByCount[attribute],\n    number: Object.keys(groupedAttributesByCount[attribute]).length,\n  }));\n\n  const filtered = flatten.filter(\n    item => item.number > 1 && item.number < (data.length * 2) / 3\n  );\n\n  return filtered.sort((a, b) => a.number - b.number);\n};\n\nconst filterHits = Component => () => (\n  <LocalSearchContext.Consumer>\n    {({ data, filters, toggleFilter, filteredData }) => {\n      const getFilteredData = getFilters(data, filteredData, filters);\n      return (\n        <Component filters={getFilteredData} toggleFilter={toggleFilter} />\n      );\n    }}\n  </LocalSearchContext.Consumer>\n);\n\nexport default filterHits;\n\nconst FilterHit = ({ filter, toggleFilter }) => (\n  <section>\n    <h2 className={filterStyle.filterName}>{filter.name}</h2>\n    <div className=\"ais-RefinementList\">\n      <ul className=\"ais-RefinementList-list\">\n        {Object.keys(filter.values).map(value => (\n          <li key={value} className=\"ais-RefinementList-item\">\n            <label className=\"ais-RefinementList-label\">\n              <input\n                className=\"ais-RefinementList-checkbox\"\n                type=\"checkbox\"\n                onChange={e => {\n                  toggleFilter({\n                    group: filter.name,\n                    name: value,\n                    value: e.nativeEvent.target.checked,\n                  });\n                }}\n              />\n              <span className=\"ais-RefinementList-labelText\">\n                {typeof value === 'string' ? value : JSON.stringify(value)}\n              </span>\n              <span className=\"ais-RefinementList-count\">\n                {filter.values[value].facetCount}\n              </span>\n            </label>\n          </li>\n        ))}\n      </ul>\n    </div>\n  </section>\n);\n\nexport const FilterHits = ({ filters, toggleFilter }) =>\n  filters.map(filter => (\n    <FilterHit key={filter.name} filter={filter} toggleFilter={toggleFilter} />\n  ));\n\nexport const ConnectedFilterHits = filterHits(FilterHits);\n","import React, { useCallback } from 'react';\nimport styles from './filePickerComponent.module.css';\n\nconst prevent = e => {\n  e.stopPropagation();\n  e.preventDefault();\n  return false;\n};\nexport const FilePickerComponent = ({ onChange }) => {\n  const onDrop = useCallback(\n    e => {\n      e.preventDefault();\n      e.stopPropagation();\n      onChange(e.dataTransfer.files);\n      return false;\n    },\n    [onChange]\n  );\n  return (\n    <div\n      className={styles.container}\n      onDragEnter={prevent}\n      onDrop={onDrop}\n      onDragOver={prevent}\n    >\n      <h2>To get started please select or drag a JSON file</h2>\n      <input type=\"file\" onChange={e => onChange(e.nativeEvent.target.files)} />\n      <p>\n        <br />\n\n        {`By the way, we don't upload your file anywhere.`}\n        <br />\n        {`The magic happens in\n      your browser.`}\n      </p>\n    </div>\n  );\n};\n","import React, { useState, useCallback, useContext, useEffect } from 'react';\nimport { FilePickerComponent } from './FilePickerComponent';\n\nconst JSONFileContext = React.createContext({\n  data: [],\n  setData: () => {},\n});\n\nexport const Consumer = JSONFileContext.Consumer;\n\nexport const Provider = ({ ...props }) => {\n  const [data, setData] = useState([]);\n\n  return <JSONFileContext.Provider value={{ data, setData }} {...props} />;\n};\n\nconst getSubData = entries => {\n  if (Array.isArray(entries)) {\n    return entries;\n  } else if (Object.keys(entries).length > 1) {\n    return Object.keys(entries).map(key => ({\n      name: key,\n      value: entries[key],\n    }));\n  } else {\n    const [key] = Object.keys(entries);\n    return getSubData(entries[key]);\n  }\n};\n\nconst fileContent = {};\n\nexport const FilePicker = () => {\n  const { setData } = useContext(JSONFileContext);\n  const onChange = useCallback(\n    files => {\n      const reader = new FileReader();\n      const file = files[0];\n\n      window.history.pushState(\n        { file: file.name },\n        file.name,\n        `?file=${file.name}`\n      );\n      reader.addEventListener('load', () => {\n        try {\n          const entries = JSON.parse(reader.result);\n          fileContent[file.name] = entries;\n          setData(getSubData(entries));\n        } catch {\n          window.alert('please select a valid JSON file');\n        }\n      });\n\n      reader.readAsText(file);\n    },\n    [setData]\n  );\n\n  useEffect(() => {\n    window.onpopstate = e => {\n      if (e && e.state && e.state.file && fileContent[e.state.file]) {\n        setData(fileContent[e.state.file]);\n      } else {\n        setData([]);\n      }\n    };\n  }, []);\n  return <FilePickerComponent onChange={onChange} />;\n};\n\nexport default JSONFileContext;\n","import React, { Component } from 'react';\nimport PropTypes from 'prop-types';\n\nimport style from './index.module.css'; /*\nimport {\n  InstantSearch,\n  Hits,\n  SearchBox,\n  Pagination,\n  Highlight,\n  RefinementList,\n} from 'react-instantsearch-dom';\n*/\n\nconst Highlight = ({ attribute, hit }) => (\n  <div className={style.highlight}>\n    {attribute} :{' '}\n    {typeof hit[attribute] === 'string'\n      ? hit[attribute]\n      : JSON.stringify(hit[attribute])}\n  </div>\n);\n\nfunction Hit(props) {\n  const {\n    hit: { title, name, ...attributes },\n  } = props;\n\n  return (\n    <article className={style.hit}>\n      {(title || name) && (\n        <div className={style.hitTitleLine}>\n          <h1 className={style.title}>\n            <div className={style.highlight}>{title}</div>\n            <div className={style.highlight}>{name}</div>\n          </h1>\n        </div>\n      )}\n      {Object.keys(attributes).map(attribute => (\n        <p key={attribute}>\n          <Highlight attribute={attribute} hit={props.hit} />\n        </p>\n      ))}\n    </article>\n  );\n}\n\nHit.propTypes = {\n  hit: PropTypes.object.isRequired,\n};\n\nexport default Hit;\n","import React from 'react';\nimport LocalSearch from './components/LocalSearch';\nimport connectHits from './components/LocalSearch/connectHits';\nimport { ConnectedFilterHits } from './components/LocalSearch/filterHits';\nimport { Provider, Consumer, FilePicker } from './components/FileContext';\n\nimport './App.css';\n\nimport { MyHits } from './MyHits';\n\nconst CustomHits = connectHits(MyHits);\n\nconst App = () => (\n  <div className=\"app-container\">\n    <Provider>\n      <header className=\"header\">\n        <h1 className=\"header-title\">\n          <a href=\"/\">JSON explorer</a>\n        </h1>\n        <p className=\"header-subtitle\">\n          Browse and filter a JSON file in your browser\n        </p>\n      </header>\n      <Consumer>\n        {({ data }) => {\n          if (!data || data.length === 0)\n            return (\n              <div className=\"main-container\">\n                <FilePicker />\n              </div>\n            );\n          else\n            return (\n              <LocalSearch searchClient={{ data }} indexName=\"retromat_en\">\n                <div className=\"main-container\">\n                  <div className=\"filter-panel\">\n                    <ConnectedFilterHits />\n                  </div>\n                  <div className=\"container\">\n                    <div className=\"search-panel\">\n                      <div className=\"search-panel__results\">\n                        <CustomHits />\n                      </div>\n                    </div>\n                  </div>\n                </div>\n              </LocalSearch>\n            );\n        }}\n      </Consumer>\n      <footer className=\"footer\">\n        <p className=\"footer-title\">\n          © All rights reserved - 2020 - Built by{' '}\n          <a href=\"https://www.linkedin.com/in/maxencedalmais/\">\n            Maxence Dalmais\n          </a>\n          {' - '}\n          Sponsored by <a href=\"https://www.retrolution.co/\">Retrolution</a>\n          {' - '}\n          Hosted by Github\n        </p>\n      </footer>\n    </Provider>\n  </div>\n);\nexport default App;\n","import React from 'react';\nimport Hit from './components/Hit';\nexport const MyHits = ({ hits = [] }) => (\n  <div className=\"ais-Hits\">\n    <ul className=\"ais-Hits-list\">\n      {hits.map(hit => (\n        <li className=\"ais-Hits-item\" key={hit.id}>\n          <Hit hit={hit} />{' '}\n        </li>\n      ))}\n    </ul>\n  </div>\n);\n","import React from 'react';\nimport ReactDOM from 'react-dom';\nimport './index.css';\nimport App from './App';\n\nReactDOM.render(<App />, document.getElementById('root'));\n"],"sourceRoot":""}